<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prompt Atelier â€” AI Prompt Portfolio</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Noto+Sans+KR:wght@300;400;500;600;700&family=Source+Code+Pro:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --bg-primary: #faf7f5;
  --bg-secondary: #f3ece8;
  --bg-card: #ffffff;
  --bg-card-hover: #fdf9f7;
  --text-primary: #2d2438;
  --text-secondary: #6b5c7a;
  --text-muted: #9b8ea8;
  --accent-rose: #c4728f;
  --accent-rose-light: #e8a4b8;
  --accent-rose-pale: #f5dde5;
  --accent-plum: #7b5ea7;
  --accent-plum-light: #a88ec4;
  --accent-plum-pale: #e8ddf2;
  --accent-mauve: #9e7bb5;
  --accent-ivory: #f9f3ee;
  --accent-gold: #c9a96e;
  --border-light: #e8dfe4;
  --border-medium: #d4c6d0;
  --shadow-soft: 0 2px 12px rgba(123, 94, 167, 0.08);
  --shadow-medium: 0 4px 24px rgba(123, 94, 167, 0.12);
  --shadow-strong: 0 8px 40px rgba(123, 94, 167, 0.16);
  --radius-sm: 8px;
  --radius-md: 14px;
  --radius-lg: 20px;
  --radius-xl: 28px;
  --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --font-display: 'Cormorant Garamond', serif;
  --font-body: 'Noto Sans KR', sans-serif;
  --font-mono: 'Source Code Pro', monospace;

  /* AI Colors */
  --claude-color: #c4728f;
  --gpt-color: #6ba89a;
  --gemini-color: #7b8ec4;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

html { scroll-behavior: smooth; }

body {
  font-family: var(--font-body);
  background: var(--bg-primary);
  color: var(--text-primary);
  min-height: 100vh;
  overflow-x: hidden;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BACKGROUND TEXTURE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(ellipse at 20% 20%, rgba(196, 114, 143, 0.06) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 80%, rgba(123, 94, 167, 0.05) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, rgba(201, 169, 110, 0.03) 0%, transparent 60%);
  pointer-events: none;
  z-index: 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER / NAV
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.site-header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: rgba(250, 247, 245, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border-light);
  padding: 0 40px;
  height: 72px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.logo {
  display: flex;
  align-items: baseline;
  gap: 10px;
  cursor: pointer;
}

.logo-icon {
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, var(--accent-rose), var(--accent-plum));
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 16px;
  align-self: center;
}

.logo-text {
  font-family: var(--font-display);
  font-size: 26px;
  font-weight: 600;
  color: var(--text-primary);
  letter-spacing: -0.5px;
}

.logo-sub {
  font-size: 13px;
  color: var(--text-muted);
  font-weight: 300;
  letter-spacing: 2px;
  text-transform: uppercase;
}

.nav-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.nav-btn {
  padding: 10px 20px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border-light);
  background: var(--bg-card);
  color: var(--text-secondary);
  font-family: var(--font-body);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  gap: 6px;
}

.nav-btn:hover {
  border-color: var(--accent-rose);
  color: var(--accent-rose);
  background: var(--accent-rose-pale);
}

.nav-btn.primary {
  background: linear-gradient(135deg, var(--accent-rose), var(--accent-plum));
  color: white;
  border: none;
}

.nav-btn.primary:hover {
  opacity: 0.9;
  transform: translateY(-1px);
  box-shadow: var(--shadow-medium);
}

.search-box {
  position: relative;
  width: 240px;
}

.search-box input {
  width: 100%;
  padding: 10px 16px 10px 36px;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  background: var(--bg-card);
  font-family: var(--font-body);
  font-size: 13px;
  color: var(--text-primary);
  outline: none;
  transition: var(--transition);
}

.search-box input:focus {
  border-color: var(--accent-mauve);
  box-shadow: 0 0 0 3px rgba(158, 123, 181, 0.1);
}

.search-box input::placeholder { color: var(--text-muted); }

.search-box .search-icon {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  font-size: 14px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FILTER BAR
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.filter-bar {
  padding: 16px 40px;
  display: flex;
  align-items: center;
  gap: 10px;
  border-bottom: 1px solid var(--border-light);
  background: rgba(250, 247, 245, 0.5);
  flex-wrap: wrap;
  position: relative;
  z-index: 1;
}

.filter-chip {
  padding: 7px 16px;
  border-radius: 20px;
  border: 1px solid var(--border-light);
  background: var(--bg-card);
  font-size: 12.5px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition);
  white-space: nowrap;
}

.filter-chip:hover {
  border-color: var(--accent-mauve);
  color: var(--accent-plum);
}

.filter-chip.active {
  background: var(--accent-plum);
  color: white;
  border-color: var(--accent-plum);
}

.filter-chip.claude.active { background: var(--claude-color); border-color: var(--claude-color); }
.filter-chip.gpt.active { background: var(--gpt-color); border-color: var(--gpt-color); }
.filter-chip.gemini.active { background: var(--gemini-color); border-color: var(--gemini-color); }

.filter-divider {
  width: 1px;
  height: 24px;
  background: var(--border-light);
  margin: 0 4px;
}

.item-count {
  margin-left: auto;
  font-size: 12px;
  color: var(--text-muted);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN GRID â€” 6Ã—5
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main-content {
  position: relative;
  z-index: 1;
  padding: 28px 40px 60px;
}

.prompt-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 18px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROMPT CARD
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.prompt-card {
  background: var(--bg-card);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  padding: 20px;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  flex-direction: column;
  min-height: 180px;
  position: relative;
  overflow: hidden;
}

.prompt-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-rose), var(--accent-plum));
  opacity: 0;
  transition: var(--transition);
}

.prompt-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-strong);
  border-color: var(--accent-rose-light);
}

.prompt-card:hover::before { opacity: 1; }

.card-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 10px;
}

.ai-badge {
  padding: 3px 10px;
  border-radius: 12px;
  font-size: 10.5px;
  font-weight: 600;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.ai-badge.claude { background: rgba(196, 114, 143, 0.12); color: var(--claude-color); }
.ai-badge.gpt { background: rgba(107, 168, 154, 0.12); color: var(--gpt-color); }
.ai-badge.gemini { background: rgba(123, 142, 196, 0.12); color: var(--gemini-color); }
.ai-badge.webapp { background: rgba(201, 169, 110, 0.12); color: var(--accent-gold); }

.card-menu-btn {
  width: 24px;
  height: 24px;
  border: none;
  background: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  transition: var(--transition);
  flex-shrink: 0;
}

.card-menu-btn:hover {
  background: var(--bg-secondary);
  color: var(--text-secondary);
}

.card-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 6px;
  line-height: 1.4;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.card-desc {
  font-size: 12px;
  color: var(--text-muted);
  line-height: 1.5;
  flex: 1;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.card-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 12px;
  padding-top: 10px;
  border-top: 1px solid var(--border-light);
}

.card-tags {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.card-tag {
  padding: 2px 8px;
  border-radius: 10px;
  background: var(--bg-secondary);
  font-size: 10px;
  color: var(--text-muted);
  font-weight: 500;
}

.card-date {
  font-size: 10px;
  color: var(--text-muted);
}

/* ADD NEW CARD */
.prompt-card.add-new {
  border: 2px dashed var(--border-medium);
  background: transparent;
  align-items: center;
  justify-content: center;
  gap: 10px;
  min-height: 180px;
}

.prompt-card.add-new:hover {
  border-color: var(--accent-rose);
  background: rgba(196, 114, 143, 0.04);
  transform: translateY(-2px);
  box-shadow: none;
}

.prompt-card.add-new::before { display: none; }

.add-icon {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: var(--accent-rose-pale);
  color: var(--accent-rose);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  transition: var(--transition);
}

.prompt-card.add-new:hover .add-icon {
  background: var(--accent-rose);
  color: white;
}

.add-label {
  font-size: 13px;
  color: var(--text-muted);
  font-weight: 500;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL â€” ADD/EDIT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(45, 36, 56, 0.5);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  z-index: 500;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 40px;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.modal-overlay.active {
  display: flex;
  opacity: 1;
}

.modal {
  background: var(--bg-card);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 680px;
  max-height: 85vh;
  overflow-y: auto;
  box-shadow: var(--shadow-strong);
  position: relative;
}

.modal-header {
  padding: 28px 32px 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.modal-title {
  font-family: var(--font-display);
  font-size: 24px;
  font-weight: 600;
  color: var(--text-primary);
}

.modal-close {
  width: 36px;
  height: 36px;
  border: 1px solid var(--border-light);
  border-radius: 50%;
  background: none;
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  transition: var(--transition);
}

.modal-close:hover {
  background: var(--bg-secondary);
  color: var(--accent-rose);
}

.modal-body {
  padding: 24px 32px 32px;
}

.form-group {
  margin-bottom: 20px;
}

.form-label {
  display: block;
  font-size: 12.5px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 8px;
  letter-spacing: 0.3px;
}

.form-input,
.form-select,
.form-textarea {
  width: 100%;
  padding: 12px 16px;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  font-family: var(--font-body);
  font-size: 14px;
  color: var(--text-primary);
  background: var(--bg-primary);
  outline: none;
  transition: var(--transition);
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
  border-color: var(--accent-mauve);
  box-shadow: 0 0 0 3px rgba(158, 123, 181, 0.1);
}

.form-textarea {
  font-family: var(--font-mono);
  font-size: 13px;
  line-height: 1.7;
  resize: vertical;
  min-height: 200px;
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.form-tags-input {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding: 8px 12px;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  background: var(--bg-primary);
  min-height: 44px;
  align-items: center;
  cursor: text;
}

.form-tags-input:focus-within {
  border-color: var(--accent-mauve);
  box-shadow: 0 0 0 3px rgba(158, 123, 181, 0.1);
}

.form-tags-input input {
  border: none;
  background: none;
  outline: none;
  font-family: var(--font-body);
  font-size: 13px;
  color: var(--text-primary);
  flex: 1;
  min-width: 80px;
}

.tag-item {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 3px 10px;
  background: var(--accent-plum-pale);
  color: var(--accent-plum);
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
}

.tag-item .remove-tag {
  cursor: pointer;
  opacity: 0.6;
  font-size: 14px;
  line-height: 1;
}

.tag-item .remove-tag:hover { opacity: 1; }

.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding-top: 8px;
}

.btn {
  padding: 11px 24px;
  border-radius: var(--radius-sm);
  font-family: var(--font-body);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
  border: none;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.btn-secondary {
  background: var(--bg-secondary);
  color: var(--text-secondary);
  border: 1px solid var(--border-light);
}

.btn-secondary:hover { background: var(--border-light); }

.btn-primary {
  background: linear-gradient(135deg, var(--accent-rose), var(--accent-plum));
  color: white;
}

.btn-primary:hover {
  opacity: 0.9;
  transform: translateY(-1px);
  box-shadow: var(--shadow-medium);
}

.btn-danger {
  background: #f5e0e0;
  color: #b44;
}

.btn-danger:hover { background: #ecc; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FILE UPLOAD AREA
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.upload-zone {
  border: 2px dashed var(--border-medium);
  border-radius: var(--radius-md);
  padding: 32px;
  text-align: center;
  cursor: pointer;
  transition: var(--transition);
  background: var(--bg-primary);
}

.upload-zone:hover,
.upload-zone.dragover {
  border-color: var(--accent-rose);
  background: rgba(196, 114, 143, 0.04);
}

.upload-zone-icon {
  font-size: 32px;
  margin-bottom: 8px;
}

.upload-zone-text {
  font-size: 13px;
  color: var(--text-secondary);
}

.upload-zone-hint {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 4px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SUB PAGE â€” DETAIL VIEW
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sub-page {
  display: none;
  position: relative;
  z-index: 1;
}

.sub-page.active { display: block; }
.main-page.hidden { display: none; }

.detail-header {
  padding: 32px 40px 24px;
  border-bottom: 1px solid var(--border-light);
}

.back-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition);
  background: none;
  border: none;
  font-family: var(--font-body);
  margin-bottom: 20px;
}

.back-btn:hover { color: var(--accent-rose); }

.detail-title-row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 20px;
}

.detail-title {
  font-family: var(--font-display);
  font-size: 32px;
  font-weight: 700;
  color: var(--text-primary);
  line-height: 1.3;
}

.detail-meta {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-top: 12px;
}

.detail-actions {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

.detail-body {
  display: grid;
  grid-template-columns: 1fr 320px;
  gap: 32px;
  padding: 32px 40px;
}

.prompt-content-area {
  background: var(--bg-card);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  overflow: hidden;
}

.prompt-content-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 20px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-light);
}

.prompt-content-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.copy-btn {
  padding: 5px 12px;
  border-radius: 6px;
  border: 1px solid var(--border-light);
  background: var(--bg-card);
  font-size: 11px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition);
  font-family: var(--font-body);
}

.copy-btn:hover {
  border-color: var(--accent-rose);
  color: var(--accent-rose);
}

.prompt-content-body {
  padding: 20px;
  font-family: var(--font-mono);
  font-size: 13px;
  line-height: 1.8;
  color: var(--text-primary);
  white-space: pre-wrap;
  word-break: break-word;
  max-height: 500px;
  overflow-y: auto;
}

/* SIDEBAR */
.detail-sidebar {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.sidebar-card {
  background: var(--bg-card);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  padding: 20px;
}

.sidebar-card-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  margin-bottom: 14px;
}

.info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid var(--border-light);
  font-size: 13px;
}

.info-row:last-child { border-bottom: none; }
.info-label { color: var(--text-muted); }
.info-value { color: var(--text-primary); font-weight: 500; }

/* AI CONVERT */
.convert-section {
  margin-top: 4px;
}

.convert-btn-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.convert-btn {
  width: 100%;
  padding: 11px 16px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border-light);
  background: var(--bg-primary);
  font-family: var(--font-body);
  font-size: 12.5px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--text-secondary);
}

.convert-btn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-soft);
}

.convert-btn.claude:hover { border-color: var(--claude-color); color: var(--claude-color); }
.convert-btn.gpt:hover { border-color: var(--gpt-color); color: var(--gpt-color); }
.convert-btn.gemini:hover { border-color: var(--gemini-color); color: var(--gemini-color); }

.convert-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.convert-dot.claude { background: var(--claude-color); }
.convert-dot.gpt { background: var(--gpt-color); }
.convert-dot.gemini { background: var(--gemini-color); }

/* CONVERT RESULT */
.convert-result {
  display: none;
  margin-top: 12px;
}

.convert-result.active { display: block; }

.convert-result-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.convert-result-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--accent-plum);
}

.convert-result-body {
  background: var(--bg-primary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  padding: 14px;
  font-family: var(--font-mono);
  font-size: 12px;
  line-height: 1.7;
  color: var(--text-primary);
  white-space: pre-wrap;
  word-break: break-word;
  max-height: 300px;
  overflow-y: auto;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UPLOAD MODAL
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#uploadModal .modal { max-width: 520px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PREVIEW MODAL
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#previewModal .modal {
  max-width: 900px;
  width: 95vw;
  height: 85vh;
  display: flex;
  flex-direction: column;
}
#previewModal .modal-body {
  flex: 1;
  padding: 0;
  overflow: hidden;
  border-radius: 0 0 var(--radius-lg) var(--radius-lg);
}
.preview-iframe {
  width: 100%;
  height: 100%;
  border: none;
  border-radius: 0 0 var(--radius-lg) var(--radius-lg);
}
.preview-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 20px;
  background: var(--bg-secondary);
  border-top: 1px solid var(--border-light);
  font-size: 12px;
  color: var(--text-muted);
}
.preview-url {
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--text-muted);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 60%;
}
.preview-open-btn {
  font-size: 12px;
  padding: 6px 14px;
  border-radius: 8px;
  background: var(--accent-plum);
  color: white;
  border: none;
  cursor: pointer;
  text-decoration: none;
  display: inline-block;
}
.preview-open-btn:hover { opacity: 0.85; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toast-container {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.toast {
  padding: 14px 20px;
  background: var(--text-primary);
  color: white;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 500;
  box-shadow: var(--shadow-strong);
  animation: toastIn 0.3s ease, toastOut 0.3s ease 2.7s forwards;
  display: flex;
  align-items: center;
  gap: 8px;
}

@keyframes toastIn { from { opacity: 0; transform: translateY(12px); } }
@keyframes toastOut { to { opacity: 0; transform: translateY(-12px); } }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EMPTY STATE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.empty-state {
  grid-column: 1 / -1;
  text-align: center;
  padding: 80px 20px;
}

.empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.empty-title {
  font-family: var(--font-display);
  font-size: 22px;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.empty-desc {
  font-size: 13px;
  color: var(--text-muted);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCROLLBAR
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: var(--border-medium);
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 1400px) {
  .prompt-grid { grid-template-columns: repeat(5, 1fr); }
}

@media (max-width: 1100px) {
  .prompt-grid { grid-template-columns: repeat(4, 1fr); }
  .detail-body { grid-template-columns: 1fr; }
}

@media (max-width: 800px) {
  .prompt-grid { grid-template-columns: repeat(3, 1fr); }
  .site-header { padding: 0 20px; }
  .main-content { padding: 20px; }
  .filter-bar { padding: 12px 20px; }
  .search-box { width: 180px; }
}

@media (max-width: 600px) {
  .prompt-grid { grid-template-columns: repeat(2, 1fr); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOADING SPINNER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.spinner {
  width: 20px;
  height: 20px;
  border: 2px solid var(--border-light);
  border-top-color: var(--accent-rose);
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
  display: inline-block;
}

@keyframes spin { to { transform: rotate(360deg); } }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTEXT MENU
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.context-menu {
  position: fixed;
  background: var(--bg-card);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-strong);
  padding: 6px 0;
  min-width: 160px;
  z-index: 600;
  display: none;
}

.context-menu.active { display: block; }

.context-menu-item {
  padding: 9px 16px;
  font-size: 13px;
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: var(--transition);
}

.context-menu-item:hover {
  background: var(--bg-secondary);
  color: var(--accent-plum);
}

.context-menu-item.danger { color: #b44; }
.context-menu-item.danger:hover { background: #fef0f0; }

.context-menu-divider {
  height: 1px;
  background: var(--border-light);
  margin: 4px 0;
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HEADER
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header class="site-header">
  <div class="logo" onclick="showMainPage()">
    <div class="logo-icon">âœ¦</div>
    <span class="logo-text">Prompt Atelier</span>
    <span class="logo-sub">Portfolio</span>
  </div>
  <div class="nav-actions">
    <div class="search-box">
      <span class="search-icon">ğŸ”</span>
      <input type="text" id="searchInput" placeholder="í”„ë¡¬í”„íŠ¸ ê²€ìƒ‰..." oninput="filterPrompts()">
    </div>
    <button class="nav-btn" onclick="openUploadModal()">ğŸ“¤ ê°€ì ¸ì˜¤ê¸°</button>
    <button class="nav-btn" onclick="exportAll()">ğŸ“¥ ì „ì²´ ë‚´ë³´ë‚´ê¸°</button>
    <button class="nav-btn primary" onclick="openAddModal()">ï¼‹ ìƒˆ í”„ë¡¬í”„íŠ¸</button>
  </div>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MAIN PAGE
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="main-page" id="mainPage">
  <!-- FILTER BAR -->
  <div class="filter-bar">
    <button class="filter-chip active" data-filter="all" onclick="setFilter('all', this)">ì „ì²´</button>
    <div class="filter-divider"></div>
    <button class="filter-chip claude" data-filter="claude" onclick="setFilter('claude', this)">Claude</button>
    <button class="filter-chip gpt" data-filter="gpt" onclick="setFilter('gpt', this)">GPT</button>
    <button class="filter-chip gemini" data-filter="gemini" onclick="setFilter('gemini', this)">Gemini</button>
    <div class="filter-divider"></div>
    <button class="filter-chip" data-filter="webapp" onclick="setFilter('webapp', this)">ì›¹ì•±</button>
    <button class="filter-chip" data-filter="system" onclick="setFilter('system', this)">ì‹œìŠ¤í…œ</button>
    <button class="filter-chip" data-filter="coding" onclick="setFilter('coding', this)">ì½”ë”©</button>
    <button class="filter-chip" data-filter="writing" onclick="setFilter('writing', this)">ê¸€ì“°ê¸°</button>
    <button class="filter-chip" data-filter="analysis" onclick="setFilter('analysis', this)">ë¶„ì„</button>
    <span class="item-count" id="itemCount"></span>
  </div>

  <!-- GRID -->
  <div class="main-content">
    <div class="prompt-grid" id="promptGrid"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SUB PAGE â€” DETAIL VIEW
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="sub-page" id="subPage">
  <div class="detail-header">
    <button class="back-btn" onclick="showMainPage()">â† ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
    <div class="detail-title-row">
      <div>
        <div class="detail-title" id="detailTitle"></div>
        <div class="detail-meta" id="detailMeta"></div>
      </div>
      <div class="detail-actions">
        <button class="btn btn-secondary" onclick="downloadCurrent()">ğŸ“¥ ë‹¤ìš´ë¡œë“œ</button>
        <button class="btn btn-secondary" onclick="editCurrent()">âœï¸ í¸ì§‘</button>
        <button class="btn btn-danger" onclick="deleteCurrent()">ğŸ—‘ï¸ ì‚­ì œ</button>
      </div>
    </div>
  </div>

  <div class="detail-body">
    <div class="prompt-content-area">
      <div class="prompt-content-header">
        <span class="prompt-content-label">í”„ë¡¬í”„íŠ¸ ë‚´ìš©</span>
        <button class="copy-btn" onclick="copyContent()">ğŸ“‹ ë³µì‚¬</button>
      </div>
      <div class="prompt-content-body" id="detailContent"></div>
    </div>

    <div class="detail-sidebar">
      <div class="sidebar-card">
        <div class="sidebar-card-title">ì •ë³´</div>
        <div id="detailInfo"></div>
      </div>

      <div class="sidebar-card">
        <div class="sidebar-card-title">AI ë³€í™˜</div>
        <div class="convert-section">
          <div class="convert-btn-group" id="convertBtns"></div>
          <div class="convert-result" id="convertResult">
            <div class="convert-result-header">
              <span class="convert-result-label" id="convertResultLabel"></span>
              <button class="copy-btn" onclick="copyConverted()">ğŸ“‹ ë³µì‚¬</button>
            </div>
            <div class="convert-result-body" id="convertResultBody"></div>
          </div>
        </div>
      </div>

      <div class="sidebar-card">
        <div class="sidebar-card-title">íƒœê·¸</div>
        <div class="card-tags" id="detailTags" style="gap:6px;flex-wrap:wrap;"></div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ADD/EDIT MODAL
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-overlay" id="addModal">
  <div class="modal">
    <div class="modal-header">
      <span class="modal-title" id="modalTitle">ìƒˆ í”„ë¡¬í”„íŠ¸</span>
      <button class="modal-close" onclick="closeModals()">âœ•</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label class="form-label">ì œëª©</label>
        <input class="form-input" id="formTitle" placeholder="í”„ë¡¬í”„íŠ¸ ì´ë¦„">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">AI ëª¨ë¸</label>
          <select class="form-select" id="formAI">
            <option value="claude">Claude</option>
            <option value="gpt">GPT</option>
            <option value="gemini">Gemini</option>
            <option value="webapp">ì›¹ì•±</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">ì¹´í…Œê³ ë¦¬</label>
          <select class="form-select" id="formCategory">
            <option value="system">ì‹œìŠ¤í…œ</option>
            <option value="coding">ì½”ë”©</option>
            <option value="writing">ê¸€ì“°ê¸°</option>
            <option value="analysis">ë¶„ì„</option>
            <option value="webapp">ì›¹ì•±</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">ì„¤ëª…</label>
        <input class="form-input" id="formDesc" placeholder="ê°„ë‹¨í•œ ì„¤ëª…">
      </div>
      <div class="form-group">
        <label class="form-label">í”„ë¡¬í”„íŠ¸ ë‚´ìš©</label>
        <textarea class="form-textarea" id="formContent" placeholder="í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
      </div>
      <div class="form-group" id="previewUrlGroup" style="display:none;">
        <label class="form-label">ğŸ”— ë¯¸ë¦¬ë³´ê¸° URL (GitHub Pages ì£¼ì†Œ)</label>
        <input class="form-input" id="formPreviewUrl" placeholder="https://username.github.io/reborn-apps/íŒŒì¼ëª….html">
      </div>
      <div class="form-group">
        <label class="form-label">íƒœê·¸ (Enterë¡œ ì¶”ê°€)</label>
        <div class="form-tags-input" id="tagsInput" onclick="document.getElementById('tagField').focus()">
          <input type="text" id="tagField" placeholder="íƒœê·¸ ì…ë ¥..." onkeydown="handleTag(event)">
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn btn-secondary" onclick="closeModals()">ì·¨ì†Œ</button>
        <button class="btn btn-primary" id="saveBtn" onclick="savePrompt()">ğŸ’¾ ì €ì¥</button>
      </div>
    </div>
  </div>
</div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PREVIEW MODAL
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-overlay" id="previewModal">
  <div class="modal" style="max-width:900px;width:95vw;height:85vh;display:flex;flex-direction:column;padding:0;overflow:hidden;">
    <div class="modal-header" style="padding:16px 20px;">
      <span class="modal-title" id="previewModalTitle">ì›¹ì•± ë¯¸ë¦¬ë³´ê¸°</span>
      <button class="modal-close" onclick="closePreview()">âœ•</button>
    </div>
    <iframe id="previewIframe" src="" style="flex:1;border:none;" sandbox="allow-scripts allow-same-origin allow-forms"></iframe>
    <div style="display:flex;align-items:center;justify-content:space-between;padding:10px 20px;background:var(--bg-secondary);border-top:1px solid var(--border-light);font-size:12px;">
      <span id="previewUrlDisplay" style="font-family:monospace;color:var(--text-muted);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:60%;"></span>
      <a id="previewOpenLink" href="#" target="_blank" style="font-size:12px;padding:6px 14px;border-radius:8px;background:var(--accent-plum);color:white;border:none;cursor:pointer;text-decoration:none;">ğŸ”— ìƒˆ íƒ­ìœ¼ë¡œ ì—´ê¸°</a>
    </div>
  </div>
</div>
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     UPLOAD MODAL
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-overlay" id="uploadModal">
  <div class="modal">
    <div class="modal-header">
      <span class="modal-title">í”„ë¡¬í”„íŠ¸ ê°€ì ¸ì˜¤ê¸°</span>
      <button class="modal-close" onclick="closeModals()">âœ•</button>
    </div>
    <div class="modal-body">
      <div class="upload-zone" id="uploadZone" onclick="document.getElementById('fileInput').click()"
           ondragover="event.preventDefault(); this.classList.add('dragover')"
           ondragleave="this.classList.remove('dragover')"
           ondrop="handleFileDrop(event)">
        <div class="upload-zone-icon">ğŸ“‚</div>
        <div class="upload-zone-text">íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</div>
        <div class="upload-zone-hint">.json / .txt / .md ì§€ì›</div>
      </div>
      <input type="file" id="fileInput" accept=".json,.txt,.md" multiple style="display:none" onchange="handleFileSelect(event)">
      <div id="uploadPreview" style="margin-top:16px;"></div>
    </div>
  </div>
</div>

<!-- CONTEXT MENU -->
<div class="context-menu" id="contextMenu">
  <div class="context-menu-item" onclick="contextAction('edit')">âœï¸ í¸ì§‘</div>
  <div class="context-menu-item" onclick="contextAction('download')">ğŸ“¥ ë‹¤ìš´ë¡œë“œ</div>
  <div class="context-menu-item" onclick="contextAction('duplicate')">ğŸ“„ ë³µì œ</div>
  <div class="context-menu-divider"></div>
  <div class="context-menu-item danger" onclick="contextAction('delete')">ğŸ—‘ï¸ ì‚­ì œ</div>
</div>

<!-- TOAST -->
<div class="toast-container" id="toastContainer"></div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA STORE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const STORAGE_KEY = 'prompt_atelier_data';
const DATA_VERSION = 'v2_webapp';
let prompts = [];
let currentFilter = 'all';
let currentSearch = '';
let currentDetailId = null;
let editingId = null;
let formTags = [];
let contextTargetId = null;

// Load from localStorage
function loadData() {
  try {
    const saved = localStorage.getItem(STORAGE_KEY);
    const savedVersion = localStorage.getItem(STORAGE_KEY + '_version');
    if (saved) {
      prompts = JSON.parse(saved);
      // ë²„ì „ì´ ë‹¤ë¥´ë©´ ì›¹ì•± ìƒ˜í”Œ ë³‘í•©
      if (savedVersion !== DATA_VERSION) {
        const webapps = getSampleData().filter(p => p.ai === 'webapp');
        const existingTitles = prompts.map(p => p.title);
        webapps.forEach(w => {
          if (!existingTitles.includes(w.title)) prompts.push(w);
        });
        saveData();
        localStorage.setItem(STORAGE_KEY + '_version', DATA_VERSION);
      }
    } else {
      prompts = getSampleData();
      saveData();
      localStorage.setItem(STORAGE_KEY + '_version', DATA_VERSION);
    }
  } catch (e) {
    prompts = getSampleData();
  }
}

function saveData() {
  try {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(prompts));
  } catch (e) {
    console.warn('Storage save failed');
  }
}

function getSampleData() {
  return [
    {
      id: genId(), title: 'ì½”ë“œ ë¦¬ë·°ì–´', ai: 'claude', category: 'coding',
      desc: 'Claude XML íƒœê·¸ ê¸°ë°˜ ì •ë°€ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸',
      content: '<role>\në‹¹ì‹ ì€ ì‹œë‹ˆì–´ ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ì´ì ì½”ë“œ ë¦¬ë·° ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\n</role>\n\n<context>\nì œê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ë¦¬ë·°í•´ì£¼ì„¸ìš”. ë‹¤ìŒ ê¸°ì¤€ìœ¼ë¡œ í‰ê°€í•´ì£¼ì„¸ìš”:\n- ì½”ë“œ í’ˆì§ˆ (ê°€ë…ì„±, ìœ ì§€ë³´ìˆ˜ì„±)\n- ì„±ëŠ¥ ì´ìŠˆ\n- ë³´ì•ˆ ì·¨ì•½ì \n- ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ ì¤€ìˆ˜ ì—¬ë¶€\n</context>\n\n<output_format>\nê° ì´ìŠˆë¥¼ ì‹¬ê°ë„(ìƒ/ì¤‘/í•˜)ë¡œ ë¶„ë¥˜í•˜ê³ ,\nê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ í•¨ê»˜ ì œê³µí•´ì£¼ì„¸ìš”.\n</output_format>',
      tags: ['ì½”ë“œë¦¬ë·°', 'XML', 'ê°œë°œ'], created: '2025-02-18'
    },
    {
      id: genId(), title: 'SEO ë¸”ë¡œê·¸ ì‘ì„±ê¸°', ai: 'gpt', category: 'writing',
      desc: 'GPTìš© SEO ìµœì í™” ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ìƒì„± í”„ë¡¬í”„íŠ¸',
      content: '# Role\nYou are an expert SEO content writer specializing in technology blogs.\n\n# Task\nWrite a comprehensive blog post about the given topic.\n\n# Requirements\n- Include H2, H3 headings for structure\n- Target keyword density: 1-2%\n- Include meta description (under 160 chars)\n- Add internal linking suggestions\n- Write in conversational but authoritative tone\n- Length: 1500-2000 words\n\n# Output\nProvide the complete blog post in markdown format.',
      tags: ['SEO', 'ë¸”ë¡œê·¸', 'ë§ˆì¼€íŒ…'], created: '2025-02-15'
    },
    {
      id: genId(), title: 'ë°ì´í„° ë¶„ì„ ë¦¬í¬íŠ¸', ai: 'gemini', category: 'analysis',
      desc: 'Geminiìš© ë°ì´í„° ë¶„ì„ ë° ì‹œê°í™” ìš”ì²­ í”„ë¡¬í”„íŠ¸',
      content: 'ë‹¤ìŒ ë°ì´í„°ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”.\n\nëª©í‘œ: ì£¼ìš” íŠ¸ë Œë“œ íŒŒì•… ë° ì¸ì‚¬ì´íŠ¸ ë„ì¶œ\n\në¶„ì„ ìš”êµ¬ì‚¬í•­:\n1. ê¸°ìˆ  í†µê³„ ìš”ì•½\n2. ì´ìƒì¹˜ íƒì§€\n3. ìƒê´€ê´€ê³„ ë¶„ì„\n4. ì‹œê³„ì—´ íŠ¸ë Œë“œ (í•´ë‹¹ ì‹œ)\n5. í•µì‹¬ ì¸ì‚¬ì´íŠ¸ 3ê°€ì§€\n\nì¶œë ¥ í˜•ì‹:\n- ê° ë¶„ì„ ë‹¨ê³„ë³„ ê²°ê³¼\n- ì‹œê°í™” ì¶”ì²œ (ì°¨íŠ¸ ìœ í˜• ì œì•ˆ)\n- ê²½ì˜ì§„ ë¸Œë¦¬í•‘ìš© ìš”ì•½ (3ì¤„)',
      tags: ['ë°ì´í„°', 'ë¶„ì„', 'ë¦¬í¬íŠ¸'], created: '2025-02-12'
    },
    {
      id: genId(), title: 'Thread ì‘ì„± ë´‡', ai: 'webapp', category: 'webapp',
      desc: 'ê°œë°œì SNS ìŠ¤ë ˆë“œ ì‘ì„± íŠœí† ë¦¬ì–¼ ì›¹ì•±',
      content: '5ë‹¨ê³„ êµ¬ì¡°í™” íŠœí† ë¦¬ì–¼ Â· TIL/ë¬¸ì œâ†’í•´ê²°/A vs B í…œí”Œë¦¿ Â· ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° Â· AI ë¶„ì„ ì ìˆ˜ Â· ì²´í¬ë¦¬ìŠ¤íŠ¸',
      previewUrl: '',
      tags: ['ì›¹ì•±', 'SNS', 'ìŠ¤ë ˆë“œ'], created: '2025-02-20'
    },
    {
      id: genId(), title: 'í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ë…¸íŠ¸', ai: 'webapp', category: 'webapp',
      desc: 'Claude/GPT/Gemini í”„ë¡¬í”„íŠ¸ ì „ëµ ë¹„êµ ë ˆí¼ëŸ°ìŠ¤ ê°€ì´ë“œ',
      content: '3ëŒ€ AI ëª¨ë¸ í”„ë¡¬í”„íŠ¸ ì „ëµ ë¹„êµ Â· CRAFT ë¶„ì„ê¸° Â· ë¹„êµí‘œ Â· ì‹¤ìŠµ ë©',
      previewUrl: '',
      tags: ['í”„ë¡¬í”„íŠ¸', 'ê°€ì´ë“œ', 'ì›¹ì•±'], created: '2025-02-22'
    },
    {
      id: genId(), title: 'Prompt Atelier', ai: 'webapp', category: 'webapp',
      desc: 'AI í”„ë¡¬í”„íŠ¸ í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬ ì‹œìŠ¤í…œ',
      content: 'Claude/GPT/Gemini í”„ë¡¬í”„íŠ¸ ì €ì¥ Â· ì¹´í…Œê³ ë¦¬ í•„í„° Â· AI ë³€í™˜ Â· ë‚´ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸° Â· localStorage ì˜êµ¬ ì €ì¥',
      previewUrl: '',
      tags: ['í”„ë¡¬í”„íŠ¸', 'í¬íŠ¸í´ë¦¬ì˜¤', 'ì›¹ì•±'], created: '2025-02-22'
    },
    {
      id: genId(), title: 'ë„ìŠ¨íŠ¸ ê°•ì˜ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±ê¸°', ai: 'webapp', category: 'webapp',
      desc: 'ë¯¸ìˆ ê´€ ë„ìŠ¨íŠ¸ ê°•ì˜ ìŠ¤í¬ë¦½íŠ¸ ìë™ ìƒì„± ì›¹ì•±',
      content: 'ì‘í’ˆ ì •ë³´ ì…ë ¥ â†’ AI ìŠ¤í¬ë¦½íŠ¸ ìë™ ìƒì„± Â· ë¯¸ìˆ  êµìœ¡ íŠ¹í™” Â· ë‹¤ì–‘í•œ ì‘í’ˆ ìœ í˜• ì§€ì›',
      previewUrl: '',
      tags: ['ë„ìŠ¨íŠ¸', 'ë¯¸ìˆ ', 'êµìœ¡', 'ì›¹ì•±'], created: '2025-02-23'
    },
    {
      id: genId(), title: 'ë„ìŠ¨íŠ¸ ë§ˆìŠ¤í„° v2.0', ai: 'webapp', category: 'webapp',
      desc: 'ë„ìŠ¨íŠ¸ ê°•ì˜ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±ê¸° ì—…ê·¸ë ˆì´ë“œ ë²„ì „',
      content: 'Anthropic API ì—°ë™ Â· localStorage ì €ì¥ Â· ê°œì„ ëœ UX Â· v1 ëŒ€ë¹„ ê¸°ëŠ¥ í™•ì¥',
      previewUrl: '',
      tags: ['ë„ìŠ¨íŠ¸', 'ë¯¸ìˆ ', 'Anthropic', 'ì›¹ì•±'], created: '2025-02-24'
    },
    {
      id: genId(), title: 'ë„ìŠ¨íŠ¸ ì–‘ì„± í”„ë¡œê·¸ë¨', ai: 'webapp', category: 'webapp',
      desc: '300ë§Œì› í”„ë¦¬ë¯¸ì—„ ë„ìŠ¨íŠ¸ ë§ˆìŠ¤í„° í´ë˜ìŠ¤ ëœë”©í˜ì´ì§€',
      content: 'í”„ë¦¬ë¯¸ì—„ ë„ìŠ¨íŠ¸ êµìœ¡ í”„ë¡œê·¸ë¨ Â· ì»¤ë¦¬í˜ëŸ¼ ì†Œê°œ Â· ìˆ˜ê°• ì‹ ì²­ Â· ê°•ì‚¬ í”„ë¡œí•„',
      previewUrl: '',
      tags: ['ë„ìŠ¨íŠ¸', 'ëœë”©í˜ì´ì§€', 'êµìœ¡', 'ì›¹ì•±'], created: '2025-02-24'
    },
    {
      id: genId(), title: 'ì¸ìŠ¤íƒ€ ì¹´ë“œë‰´ìŠ¤ ë©”ì´ì»¤', ai: 'webapp', category: 'webapp',
      desc: 'Canvas API ê¸°ë°˜ ì¸ìŠ¤íƒ€ê·¸ë¨ ì¹´ë“œë‰´ìŠ¤ ìë™ ìƒì„±ê¸°',
      content: 'Canvas 1080Ã—1080 ë Œë”ë§ Â· Gemini API ì†Œì œëª© ìƒì„± Â· 5ê°€ì§€ ë””ìì¸ Â· PNG/ZIP ë‹¤ìš´ë¡œë“œ Â· í…ìŠ¤íŠ¸ ìë™ í°íŠ¸ ì¶•ì†Œ',
      previewUrl: '',
      tags: ['ì¸ìŠ¤íƒ€', 'ì¹´ë“œë‰´ìŠ¤', 'Canvas', 'Gemini', 'ì›¹ì•±'], created: '2025-02-25'
    },
    {
      id: genId(), title: '2026 ë§Œë‹¤ë¼íŠ¸ KPI ëŒ€ì‹œë³´ë“œ', ai: 'webapp', category: 'webapp',
      desc: '2026ë…„ ëª©í‘œ ê´€ë¦¬ë¥¼ ìœ„í•œ ë§Œë‹¤ë¼íŠ¸ KPI ëŒ€ì‹œë³´ë“œ',
      content: 'Chart.js ì‹œê°í™” Â· localStorage ì €ì¥ Â· KPI ì¶”ì  Â· ë§Œë‹¤ë¼íŠ¸ 9x9 êµ¬ì¡°',
      previewUrl: '',
      tags: ['ë§Œë‹¤ë¼íŠ¸', 'KPI', 'ëª©í‘œê´€ë¦¬', 'ì›¹ì•±'], created: '2025-02-25'
    },
    {
      id: genId(), title: 'API ë¬¸ì„œ ìƒì„±ê¸°', ai: 'claude', category: 'coding',
      desc: 'REST API ìë™ ë¬¸ì„œí™” í”„ë¡¬í”„íŠ¸',
      content: '<role>ë‹¹ì‹ ì€ ê¸°ìˆ  ë¬¸ì„œ ì‘ì„± ì „ë¬¸ê°€ì…ë‹ˆë‹¤.</role>\n\n<task>\nì œê³µëœ API ì—”ë“œí¬ì¸íŠ¸ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ ë‹¤ìŒ í¬ë§·ì˜ ë¬¸ì„œë¥¼ ìƒì„±í•˜ì„¸ìš”:\n\n1. ì—”ë“œí¬ì¸íŠ¸ ê°œìš”\n2. ìš”ì²­ íŒŒë¼ë¯¸í„° (í‘œ í˜•ì‹)\n3. ì‘ë‹µ ìŠ¤í‚¤ë§ˆ (JSON ì˜ˆì‹œ)\n4. ì—ëŸ¬ ì½”ë“œ ëª©ë¡\n5. ì‚¬ìš© ì˜ˆì‹œ (curl)\n</task>\n\n<constraints>\n- OpenAPI 3.0 ìŠ¤í™ ì¤€ìˆ˜\n- í•œêµ­ì–´ë¡œ ì‘ì„±\n- ì½”ë“œ ë¸”ë¡ì— ì–¸ì–´ ëª…ì‹œ\n</constraints>',
      tags: ['API', 'ë¬¸ì„œí™”', 'ìë™í™”'], created: '2025-02-10'
    },
    {
      id: genId(), title: 'ì´ë©”ì¼ í†¤ ë³€í™˜ê¸°', ai: 'gpt', category: 'writing',
      desc: 'ë¹„ì¦ˆë‹ˆìŠ¤ ì´ë©”ì¼ í†¤ ì¡°ì ˆ í”„ë¡¬í”„íŠ¸',
      content: '# Email Tone Converter\n\nConvert the given email draft to the specified tone:\n\nAvailable tones:\n- Professional formal\n- Friendly professional\n- Casual\n- Apologetic\n- Urgent\n\nRules:\n1. Preserve all key information\n2. Adjust vocabulary and sentence structure\n3. Keep the same length (Â±20%)\n4. Add appropriate greeting/closing\n5. Flag any potentially sensitive content\n\nOutput: Converted email + brief explanation of changes made.',
      tags: ['ì´ë©”ì¼', 'ë¹„ì¦ˆë‹ˆìŠ¤', 'í†¤'], created: '2025-02-08'
    },
    {
      id: genId(), title: 'í•™ìŠµ ê³„íš ì„¤ê³„ì', ai: 'claude', category: 'system',
      desc: 'ADHD ì¹œí™”ì  í•™ìŠµ ì¼ì • ì„¤ê³„ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸',
      content: '<role>\në‹¹ì‹ ì€ ADHD ì‚¬ìš©ìë¥¼ ìœ„í•œ í•™ìŠµ ì„¤ê³„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\nì´ë¦„ì€ "ë£¨ë‚˜"ì´ë©°, ë”°ëœ»í•˜ê³  êµ¬ì¡°ì ì¸ ìŠ¤íƒ€ì¼ë¡œ ì†Œí†µí•©ë‹ˆë‹¤.\n</role>\n\n<principles>\n- ë¸”ë¡ ë‹¨ìœ„: 25ë¶„ í•™ìŠµ + 5ë¶„ íœ´ì‹\n- í•˜ë£¨ ìµœëŒ€ 2ë¸”ë¡\n- ì••ì¶• ì¸ì‚¬ì´íŠ¸: ìµœëŒ€ 3ê°œ\n- ì–´ë ¤ìš´ ê°œë…ì€ ì¼ìƒ ë¹„ìœ ë¡œ ì„¤ëª…\n- ë¶ˆí™•ì‹¤í•œ ì •ë³´ëŠ” ëª…í™•íˆ í‘œì‹œ\n</principles>\n\n<output>\nğŸ“… ì¼ì •í‘œ + ğŸ”” ì•Œë¦¼ ì„¤ì • + âš ï¸ íŠ¹ì´ì‚¬í•­\n</output>',
      tags: ['í•™ìŠµ', 'ADHD', 'ì‹œìŠ¤í…œ'], created: '2025-02-05'
    },
    {
      id: genId(), title: 'SQL ì¿¼ë¦¬ ìµœì í™”', ai: 'gemini', category: 'coding',
      desc: 'SQL ì„±ëŠ¥ ë¶„ì„ ë° ìµœì í™” í”„ë¡¬í”„íŠ¸',
      content: 'ì£¼ì–´ì§„ SQL ì¿¼ë¦¬ë¥¼ ë¶„ì„í•˜ê³  ìµœì í™”í•´ì£¼ì„¸ìš”.\n\në¶„ì„ í•­ëª©:\n1. ì‹¤í–‰ ê³„íš ì˜ˆì¸¡\n2. ì¸ë±ìŠ¤ í™œìš© ì—¬ë¶€\n3. N+1 ì¿¼ë¦¬ ë¬¸ì œ\n4. ë¶ˆí•„ìš”í•œ í’€ í…Œì´ë¸” ìŠ¤ìº”\n5. JOIN ìµœì í™” ê¸°íšŒ\n\nì¶œë ¥:\n- ì›ë³¸ vs ìµœì í™” ì¿¼ë¦¬\n- ì˜ˆìƒ ì„±ëŠ¥ ê°œì„ ë¥ \n- ì¸ë±ìŠ¤ ì¶”ê°€ ì œì•ˆ\n- ì£¼ì˜ì‚¬í•­',
      tags: ['SQL', 'ìµœì í™”', 'DB'], created: '2025-02-01'
    },
    {
      id: genId(), title: 'ì‚¬ìš©ì í˜ë¥´ì†Œë‚˜ ë¹Œë”', ai: 'gpt', category: 'analysis',
      desc: 'UX ë¦¬ì„œì¹˜ìš© í˜ë¥´ì†Œë‚˜ ìƒì„± í”„ë¡¬í”„íŠ¸',
      content: '# Persona Builder\n\nBased on the provided user research data, create a detailed persona:\n\n## Output Structure\n1. Name & Demographics\n2. Background & Context\n3. Goals (primary + secondary)\n4. Pain Points (ranked by severity)\n5. Behavior Patterns\n6. Tech Savviness (1-5 scale)\n7. Quote (representative statement)\n8. Scenario (a day in their life)\n\n## Rules\n- Make the persona feel like a real person\n- Include specific, concrete details\n- Avoid stereotypes\n- Base all details on provided data only',
      tags: ['UX', 'í˜ë¥´ì†Œë‚˜', 'ë¦¬ì„œì¹˜'], created: '2025-01-28'
    }
  ];
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UTILITY
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function genId() {
  return 'p_' + Date.now().toString(36) + Math.random().toString(36).slice(2, 7);
}

function toast(msg) {
  const c = document.getElementById('toastContainer');
  const t = document.createElement('div');
  t.className = 'toast';
  t.textContent = msg;
  c.appendChild(t);
  setTimeout(() => t.remove(), 3000);
}

function formatDate(str) {
  if (!str) return '-';
  const d = new Date(str);
  return d.toLocaleDateString('ko-KR', { year: 'numeric', month: 'short', day: 'numeric' });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDERING
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderGrid() {
  const grid = document.getElementById('promptGrid');
  let filtered = prompts;

  // filter by AI or category
  if (currentFilter !== 'all') {
    filtered = filtered.filter(p =>
      p.ai === currentFilter || p.category === currentFilter
    );
  }

  // search
  if (currentSearch) {
    const q = currentSearch.toLowerCase();
    filtered = filtered.filter(p =>
      p.title.toLowerCase().includes(q) ||
      p.desc.toLowerCase().includes(q) ||
      (p.tags || []).some(t => t.toLowerCase().includes(q)) ||
      p.content.toLowerCase().includes(q)
    );
  }

  // Update count
  document.getElementById('itemCount').textContent = `${filtered.length}ê°œ í•­ëª©`;

  let html = '';

  // ADD NEW card
  html += `
    <div class="prompt-card add-new" onclick="openAddModal()">
      <div class="add-icon">ï¼‹</div>
      <div class="add-label">ìƒˆ í”„ë¡¬í”„íŠ¸ ì¶”ê°€</div>
    </div>
  `;

  if (filtered.length === 0) {
    html += `
      <div class="empty-state">
        <div class="empty-icon">âœ¦</div>
        <div class="empty-title">í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤</div>
        <div class="empty-desc">ìƒˆ í”„ë¡¬í”„íŠ¸ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ í•„í„°ë¥¼ ë³€ê²½í•´ë³´ì„¸ìš”</div>
      </div>
    `;
  } else {
    // Sort by created desc
    filtered.sort((a, b) => new Date(b.created) - new Date(a.created));

    filtered.forEach(p => {
      const tagsHtml = (p.tags || []).slice(0, 3).map(t =>
        `<span class="card-tag">${t}</span>`
      ).join('');

      html += `
        <div class="prompt-card" onclick="showDetail('${p.id}')" data-id="${p.id}">
          <div class="card-header">
            <span class="ai-badge ${p.ai}">${p.ai.toUpperCase()}</span>
            <button class="card-menu-btn" onclick="event.stopPropagation(); showContextMenu(event, '${p.id}')">â‹¯</button>
          </div>
          <div class="card-title">${escHtml(p.title)}</div>
          <div class="card-desc">${escHtml(p.desc)}</div>
          <div class="card-footer">
            <div class="card-tags">${tagsHtml}</div>
            <span class="card-date">${formatDate(p.created)}</span>
          </div>
        </div>
      `;
    });
  }

  grid.innerHTML = html;
}

function escHtml(s) {
  const d = document.createElement('div');
  d.textContent = s || '';
  return d.innerHTML;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FILTERS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function setFilter(val, el) {
  currentFilter = val;
  document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
  if (el) el.classList.add('active');
  renderGrid();
}

function filterPrompts() {
  currentSearch = document.getElementById('searchInput').value.trim();
  renderGrid();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAVIGATION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showMainPage() {
  document.getElementById('mainPage').classList.remove('hidden');
  document.getElementById('subPage').classList.remove('active');
  currentDetailId = null;
  renderGrid();
}

function showDetail(id) {
  const p = prompts.find(x => x.id === id);
  if (!p) return;

  currentDetailId = id;
  document.getElementById('mainPage').classList.add('hidden');
  document.getElementById('subPage').classList.add('active');

  document.getElementById('detailTitle').textContent = p.title;
  document.getElementById('detailContent').textContent = p.content;

  // Meta
  document.getElementById('detailMeta').innerHTML = `
    <span class="ai-badge ${p.ai}">${p.ai.toUpperCase()}</span>
    <span style="font-size:12px;color:var(--text-muted)">${p.category}</span>
    <span style="font-size:12px;color:var(--text-muted)">${formatDate(p.created)}</span>
  `;

  // Info
  document.getElementById('detailInfo').innerHTML = `
    <div class="info-row"><span class="info-label">AI ëª¨ë¸</span><span class="info-value">${p.ai.toUpperCase()}</span></div>
    <div class="info-row"><span class="info-label">ì¹´í…Œê³ ë¦¬</span><span class="info-value">${p.category}</span></div>
    <div class="info-row"><span class="info-label">ìƒì„±ì¼</span><span class="info-value">${formatDate(p.created)}</span></div>
    <div class="info-row"><span class="info-label">ê¸€ì ìˆ˜</span><span class="info-value">${p.content.length.toLocaleString()}ì</span></div>
  `;

  // Tags
  document.getElementById('detailTags').innerHTML = (p.tags || []).map(t =>
    `<span class="card-tag" style="font-size:12px;padding:4px 12px;">${t}</span>`
  ).join('');

  // Convert buttons (only for non-webapp)
  const targets = ['claude', 'gpt', 'gemini'].filter(x => x !== p.ai);
  const convertBtns = document.getElementById('convertBtns');

  if (p.ai === 'webapp') {
    const previewBtn = p.previewUrl
      ? `<button class="btn btn-secondary" onclick="openPreview('${p.id}')">ğŸ” ë¯¸ë¦¬ë³´ê¸°</button>`
      : `<button class="btn btn-secondary" style="opacity:0.4;cursor:default;" title="GitHub Pages URLì„ ë“±ë¡í•˜ë©´ ë¯¸ë¦¬ë³´ê¸°ê°€ í™œì„±í™”ë¼ìš”">ğŸ” ë¯¸ë¦¬ë³´ê¸° (URL ë¯¸ë“±ë¡)</button>`;
    convertBtns.innerHTML = previewBtn + '<div style="font-size:12px;color:var(--text-muted);margin-top:8px;">ì›¹ì•±ì€ AI ë³€í™˜ì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>';
  } else {
    convertBtns.innerHTML = targets.map(ai => `
      <button class="convert-btn ${ai}" onclick="convertPrompt('${ai}')">
        <span class="convert-dot ${ai}"></span>
        ${ai.toUpperCase()}ìš©ìœ¼ë¡œ ë³€í™˜
      </button>
    `).join('');
  }

  // Reset convert result
  document.getElementById('convertResult').classList.remove('active');
  window.scrollTo({ top: 0 });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ADD / EDIT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function togglePreviewUrlField() {
  const ai = document.getElementById('formAI').value;
  const grp = document.getElementById('previewUrlGroup');
  if (grp) grp.style.display = ai === 'webapp' ? '' : 'none';
}

function openAddModal() {
  editingId = null;
  formTags = [];
  document.getElementById('modalTitle').textContent = 'ìƒˆ í”„ë¡¬í”„íŠ¸';
  document.getElementById('saveBtn').textContent = 'ğŸ’¾ ì €ì¥';
  document.getElementById('formTitle').value = '';
  document.getElementById('formAI').value = 'claude';
  document.getElementById('formCategory').value = 'system';
  document.getElementById('formDesc').value = '';
  document.getElementById('formContent').value = '';
  document.getElementById('formPreviewUrl').value = '';
  togglePreviewUrlField();
  renderFormTags();
  document.getElementById('addModal').classList.add('active');
  document.getElementById('formAI').onchange = togglePreviewUrlField;
}

function editCurrent() {
  const p = prompts.find(x => x.id === currentDetailId);
  if (!p) return;
  openEditModal(p.id);
}

function openEditModal(id) {
  const p = prompts.find(x => x.id === id);
  if (!p) return;

  editingId = id;
  formTags = [...(p.tags || [])];
  document.getElementById('modalTitle').textContent = 'í”„ë¡¬í”„íŠ¸ í¸ì§‘';
  document.getElementById('saveBtn').textContent = 'âœ… ìˆ˜ì • ì™„ë£Œ';
  document.getElementById('formTitle').value = p.title;
  document.getElementById('formAI').value = p.ai;
  document.getElementById('formCategory').value = p.category;
  document.getElementById('formDesc').value = p.desc;
  document.getElementById('formContent').value = p.content;
  document.getElementById('formPreviewUrl').value = p.previewUrl || '';
  togglePreviewUrlField();
  document.getElementById('formAI').onchange = togglePreviewUrlField;
  renderFormTags();
  document.getElementById('addModal').classList.add('active');
}

function savePrompt() {
  const title = document.getElementById('formTitle').value.trim();
  const ai = document.getElementById('formAI').value;
  const category = document.getElementById('formCategory').value;
  const desc = document.getElementById('formDesc').value.trim();
  const content = document.getElementById('formContent').value.trim();
  const previewUrl = document.getElementById('formPreviewUrl').value.trim();

  if (!title || !content) {
    toast('âš ï¸ ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
    return;
  }

  if (editingId) {
    const idx = prompts.findIndex(x => x.id === editingId);
    if (idx !== -1) {
      prompts[idx] = { ...prompts[idx], title, ai, category, desc, content, previewUrl, tags: [...formTags] };
      toast('âœ… í”„ë¡¬í”„íŠ¸ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤');
    }
  } else {
    prompts.push({
      id: genId(), title, ai, category, desc, content, previewUrl,
      tags: [...formTags],
      created: new Date().toISOString().slice(0, 10)
    });
    toast('âœ… ìƒˆ í”„ë¡¬í”„íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤');
  }

  saveData();
  closeModals();
  if (currentDetailId && editingId === currentDetailId) {
    showDetail(currentDetailId);
  } else {
    renderGrid();
  }
  editingId = null;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TAGS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function handleTag(e) {
  if (e.key === 'Enter') {
    e.preventDefault();
    const val = e.target.value.trim();
    if (val && !formTags.includes(val) && formTags.length < 10) {
      formTags.push(val);
      renderFormTags();
    }
    e.target.value = '';
  }
}

function removeFormTag(idx) {
  formTags.splice(idx, 1);
  renderFormTags();
}

function renderFormTags() {
  const container = document.getElementById('tagsInput');
  const input = document.getElementById('tagField');
  const tagEls = container.querySelectorAll('.tag-item');
  tagEls.forEach(el => el.remove());

  formTags.forEach((t, i) => {
    const span = document.createElement('span');
    span.className = 'tag-item';
    span.innerHTML = `${escHtml(t)} <span class="remove-tag" onclick="event.stopPropagation(); removeFormTag(${i})">Ã—</span>`;
    container.insertBefore(span, input);
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DELETE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function deleteCurrent() {
  if (!currentDetailId) return;
  if (!confirm('ì´ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚­ì œí• ê¹Œìš”?')) return;
  prompts = prompts.filter(x => x.id !== currentDetailId);
  saveData();
  toast('ğŸ—‘ï¸ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
  showMainPage();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DOWNLOAD / EXPORT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function downloadCurrent() {
  const p = prompts.find(x => x.id === currentDetailId);
  if (!p) return;
  downloadPrompt(p);
}

function downloadPrompt(p) {
  const data = {
    title: p.title,
    ai: p.ai,
    category: p.category,
    description: p.desc,
    content: p.content,
    tags: p.tags,
    created: p.created,
    exported: new Date().toISOString()
  };
  const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `${p.title.replace(/[^a-zA-Z0-9ê°€-í£]/g, '_')}.json`;
  a.click();
  URL.revokeObjectURL(url);
  toast('ğŸ“¥ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ');
}

function exportAll() {
  if (prompts.length === 0) {
    toast('âš ï¸ ë‚´ë³´ë‚¼ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤');
    return;
  }
  const data = {
    version: '1.0',
    exported: new Date().toISOString(),
    count: prompts.length,
    prompts: prompts
  };
  const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `prompt_atelier_backup_${new Date().toISOString().slice(0,10)}.json`;
  a.click();
  URL.revokeObjectURL(url);
  toast(`ğŸ“¥ ${prompts.length}ê°œ í”„ë¡¬í”„íŠ¸ ì „ì²´ ë‚´ë³´ë‚´ê¸° ì™„ë£Œ`);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UPLOAD / IMPORT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function openUploadModal() {
  document.getElementById('uploadPreview').innerHTML = '';
  document.getElementById('uploadModal').classList.add('active');
}

function handleFileDrop(e) {
  e.preventDefault();
  e.currentTarget.classList.remove('dragover');
  handleFiles(e.dataTransfer.files);
}

function handleFileSelect(e) {
  handleFiles(e.target.files);
  e.target.value = '';
}

function handleFiles(files) {
  Array.from(files).forEach(file => {
    const reader = new FileReader();
    reader.onload = (e) => {
      try {
        const text = e.target.result;
        let imported = [];

        if (file.name.endsWith('.json')) {
          const json = JSON.parse(text);
          if (json.prompts && Array.isArray(json.prompts)) {
            imported = json.prompts;
          } else if (json.title && json.content) {
            imported = [json];
          } else {
            toast('âš ï¸ ì§€ì›í•˜ì§€ ì•ŠëŠ” JSON í˜•ì‹ì…ë‹ˆë‹¤');
            return;
          }
        } else {
          // txt / md â†’ single prompt
          imported = [{
            title: file.name.replace(/\.(txt|md)$/, ''),
            content: text,
            ai: 'claude',
            category: 'system',
            desc: `${file.name}ì—ì„œ ê°€ì ¸ì˜´`,
            tags: ['imported']
          }];
        }

        imported.forEach(item => {
          prompts.push({
            id: genId(),
            title: item.title || 'Untitled',
            ai: item.ai || 'claude',
            category: item.category || 'system',
            desc: item.desc || item.description || '',
            content: item.content || '',
            tags: item.tags || [],
            created: item.created || new Date().toISOString().slice(0, 10)
          });
        });

        saveData();
        toast(`âœ… ${imported.length}ê°œ í”„ë¡¬í”„íŠ¸ ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ`);
        closeModals();
        renderGrid();
      } catch (err) {
        toast('âš ï¸ íŒŒì¼ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');
        console.error(err);
      }
    };
    reader.readAsText(file);
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COPY
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function copyContent() {
  const text = document.getElementById('detailContent').textContent;
  navigator.clipboard.writeText(text).then(() => toast('ğŸ“‹ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤'));
}

function copyConverted() {
  const text = document.getElementById('convertResultBody').textContent;
  navigator.clipboard.writeText(text).then(() => toast('ğŸ“‹ ë³€í™˜ ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤'));
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AI CONVERSION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function convertPrompt(targetAI) {
  const p = prompts.find(x => x.id === currentDetailId);
  if (!p) return;

  const converted = doConvert(p.content, p.ai, targetAI);

  document.getElementById('convertResultLabel').textContent = `${targetAI.toUpperCase()}ìš©ìœ¼ë¡œ ë³€í™˜ë¨`;
  document.getElementById('convertResultBody').textContent = converted;
  document.getElementById('convertResult').classList.add('active');
  toast(`âš¡ ${targetAI.toUpperCase()}ìš©ìœ¼ë¡œ ë³€í™˜ ì™„ë£Œ`);
}

function doConvert(content, fromAI, toAI) {
  // Convert between AI prompt styles
  let result = content;

  if (toAI === 'claude') {
    result = convertToClaude(result, fromAI);
  } else if (toAI === 'gpt') {
    result = convertToGPT(result, fromAI);
  } else if (toAI === 'gemini') {
    result = convertToGemini(result, fromAI);
  }

  return result;
}

function convertToClaude(content, from) {
  let result = content;

  // Remove markdown headers â†’ XML tags
  result = result.replace(/^# Role\n?/gm, '<role>\n');
  result = result.replace(/^# Task\n?/gm, '<task>\n');
  result = result.replace(/^# Requirements\n?/gm, '<requirements>\n');
  result = result.replace(/^# Output\n?/gm, '<output_format>\n');
  result = result.replace(/^# Rules\n?/gm, '<rules>\n');
  result = result.replace(/^## (.+)$/gm, '<$1>');

  // If no XML tags exist, wrap in Claude structure
  if (!result.includes('<role>') && !result.includes('<task>')) {
    const lines = result.split('\n');
    let role = '';
    let task = '';
    let rest = [];
    let section = 'task';

    lines.forEach(line => {
      if (line.match(/^(ì—­í• |Role|ë‹¹ì‹ ì€)/i)) {
        section = 'role';
        role += line + '\n';
      } else if (line.match(/^(ê³¼ì œ|Task|ì‘ì—…|ëª©í‘œ|Goal)/i)) {
        section = 'task';
        task += line + '\n';
      } else if (section === 'role' && !line.match(/^(#|\n)/)) {
        role += line + '\n';
      } else {
        rest.push(line);
      }
    });

    if (role || task) {
      result = '';
      if (role) result += `<role>\n${role.trim()}\n</role>\n\n`;
      if (task) result += `<task>\n${task.trim()}\n</task>\n\n`;
      if (rest.length) result += `<context>\n${rest.join('\n').trim()}\n</context>`;
    } else {
      result = `<instructions>\n${content.trim()}\n</instructions>`;
    }
  }

  // Add Claude-style formatting hint
  if (!result.includes('<output_format>')) {
    result += '\n\n<output_format>\nêµ¬ì¡°í™”ëœ í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”.\n</output_format>';
  }

  return result.trim();
}

function convertToGPT(content, from) {
  let result = content;

  // Remove XML tags â†’ Markdown headers
  result = result.replace(/<role>\n?/g, '# Role\n');
  result = result.replace(/<\/role>\n?/g, '\n');
  result = result.replace(/<task>\n?/g, '# Task\n');
  result = result.replace(/<\/task>\n?/g, '\n');
  result = result.replace(/<context>\n?/g, '# Context\n');
  result = result.replace(/<\/context>\n?/g, '\n');
  result = result.replace(/<instructions>\n?/g, '# Instructions\n');
  result = result.replace(/<\/instructions>\n?/g, '\n');
  result = result.replace(/<output_format>\n?/g, '# Output Format\n');
  result = result.replace(/<\/output_format>\n?/g, '\n');
  result = result.replace(/<requirements>\n?/g, '# Requirements\n');
  result = result.replace(/<\/requirements>\n?/g, '\n');
  result = result.replace(/<rules>\n?/g, '# Rules\n');
  result = result.replace(/<\/rules>\n?/g, '\n');
  result = result.replace(/<constraints>\n?/g, '# Constraints\n');
  result = result.replace(/<\/constraints>\n?/g, '\n');
  result = result.replace(/<principles>\n?/g, '# Principles\n');
  result = result.replace(/<\/principles>\n?/g, '\n');
  result = result.replace(/<[^>]+>\n?/g, '');

  // Clean up multiple blank lines
  result = result.replace(/\n{3,}/g, '\n\n');

  // Add GPT-style system instruction hint
  if (!result.includes('Think step by step') && !result.includes('step-by-step')) {
    result += '\n\nThink carefully and provide a comprehensive response.';
  }

  return result.trim();
}

function convertToGemini(content, from) {
  let result = content;

  // Gemini prefers shorter, direct prompts
  // Remove XML tags
  result = result.replace(/<[^>]+>/g, '');

  // Remove markdown headers â†’ simpler format
  result = result.replace(/^#+\s*/gm, '');

  // Clean up
  result = result.replace(/\n{3,}/g, '\n\n');

  // Gemini style: direct and concise
  const lines = result.trim().split('\n').filter(l => l.trim());
  if (lines.length > 2) {
    result = lines.join('\n');
  }

  // Add Gemini-style format hint
  if (!result.includes('í˜•ì‹') && !result.includes('format') && !result.includes('Format')) {
    result += '\n\nìœ„ ë‚´ìš©ì„ ëª…í™•í•˜ê³  êµ¬ì¡°ì ìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”.';
  }

  return result.trim();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTEXT MENU
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showContextMenu(e, id) {
  e.preventDefault();
  contextTargetId = id;
  const menu = document.getElementById('contextMenu');
  menu.style.left = e.clientX + 'px';
  menu.style.top = e.clientY + 'px';
  menu.classList.add('active');
}

function contextAction(action) {
  closeContextMenu();
  const p = prompts.find(x => x.id === contextTargetId);
  if (!p) return;

  switch (action) {
    case 'edit':
      openEditModal(p.id);
      break;
    case 'download':
      downloadPrompt(p);
      break;
    case 'duplicate':
      const dup = { ...p, id: genId(), title: p.title + ' (ë³µì‚¬)', created: new Date().toISOString().slice(0, 10), tags: [...(p.tags || [])] };
      prompts.push(dup);
      saveData();
      renderGrid();
      toast('ğŸ“„ ë³µì œë˜ì—ˆìŠµë‹ˆë‹¤');
      break;
    case 'delete':
      if (confirm('ì´ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚­ì œí• ê¹Œìš”?')) {
        prompts = prompts.filter(x => x.id !== contextTargetId);
        saveData();
        renderGrid();
        toast('ğŸ—‘ï¸ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
      }
      break;
  }
}

function closeContextMenu() {
  document.getElementById('contextMenu').classList.remove('active');
}

document.addEventListener('click', (e) => {
  if (!e.target.closest('.context-menu') && !e.target.closest('.card-menu-btn')) {
    closeContextMenu();
  }
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODALS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function closeModals() {
  document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active'));
}

function openPreview(id) {
  const p = prompts.find(x => x.id === id);
  if (!p || !p.previewUrl) { toast('âš ï¸ ë¯¸ë¦¬ë³´ê¸° URLì´ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤'); return; }
  document.getElementById('previewModalTitle').textContent = 'ğŸ” ' + p.title;
  document.getElementById('previewIframe').src = p.previewUrl;
  document.getElementById('previewUrlDisplay').textContent = p.previewUrl;
  document.getElementById('previewOpenLink').href = p.previewUrl;
  document.getElementById('previewModal').classList.add('active');
}

function closePreview() {
  document.getElementById('previewModal').classList.remove('active');
  document.getElementById('previewIframe').src = '';
}

// Close modal on overlay click
document.querySelectorAll('.modal-overlay').forEach(overlay => {
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) closeModals();
  });
});

// ESC to close
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    closeModals();
    closeContextMenu();
  }
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
loadData();
renderGrid();
</script>
</body>
</html>
